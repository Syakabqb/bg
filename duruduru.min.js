"use strict";var schedules="9/6\tY\t니쿠\t디핑\t\t\t\t\t\t|9/6\tN\t영혼을담은트롤링\tJul\t\t\t\t\t\t|9/6\tN\t햄\tBeSunny\t\t\t\t\t\t|9/6\tN\t구름위로\t빵꾸똥꾸\t\t\t\t\t\t|9/6\tN\t파인\t호카\t\t\t\t\t\t|9/6\tN\t뮤지컬\t마카롱\t\t\t\t\t\t|9/6\tN\t양양C\t신나고\t\t\t\t\t|",firstContact="구름위로\t빵꾸똥꾸\t|영혼을담은트롤링\tJul\t|",DATE=0,PUBLIC=1,PARTICIPANTS=2,dataSchedules=[],dataCoOccuranceList={},dataFirstContact={},dataBonus={},dataScores=[];for(var key in schedules.split("|").forEach(function(t){if(0!=t.length){var a=t.split("\t"),e=[];e[DATE]=a[0],"Y"==a[1]?e[PUBLIC]=!0:e[PUBLIC]=!1,e[PARTICIPANTS]=[];for(var n=2;n<a.length;n++)a[n].length>0&&e[PARTICIPANTS].push(a[n]);dataSchedules.push(e)}}),dataSchedules.forEach(function(t){for(var a=0;a<t[PARTICIPANTS].length-1;a++){var e=t[PARTICIPANTS][a];null==dataCoOccuranceList[e]&&(dataCoOccuranceList[e]=new Set,dataFirstContact[e]=new Set,dataBonus[e]=0);for(var n=a+1;n<t[PARTICIPANTS].length;n++){var c=t[PARTICIPANTS][n];null==dataCoOccuranceList[c]&&(dataCoOccuranceList[c]=new Set,dataFirstContact[c]=new Set,dataBonus[c]=0),dataCoOccuranceList[e].add(c),dataCoOccuranceList[c].add(e)}}if(1==t[PUBLIC]){dataBonus[t[PARTICIPANTS][0]]+=2;for(var r=1;r<t[PARTICIPANTS].length;r++)dataBonus[t[PARTICIPANTS][r]]+=1}}),firstContact.split("|").forEach(function(t){if(0!=t.length){var a=t.split("\t");dataFirstContact[a[0]].add(a[1]),dataFirstContact[a[1]].add(a[0])}}),dataBonus)dataScores.push({score:dataBonus[key]+dataCoOccuranceList[key].size+dataFirstContact[key].size,name:key});dataScores.sort(function(t,a){return t.score>a.score?-1:t.score<a.score?1:t.name>a.name?1:t.name<a.name?-1:0}),console.log("dataSchedules",dataSchedules),console.log("dataCoOccuranceList",dataCoOccuranceList),console.log("dataBonus",dataBonus),console.log("dataScores",dataScores);var tlbTopBoard=document.getElementById("tlbTopBoard"),rankingIdx=1,prevRankingIdx=0,prevScore=0;dataScores.forEach(function(t){var a=document.createElement("tr");tlbTopBoard.appendChild(a);var e=document.createElement("td");a.appendChild(e),prevScore!=t.score?e.innerHTML=rankingIdx:e.innerHTML=prevRankingIdx,prevRankingIdx=e.innerHTML,rankingIdx+=1,prevScore=t.score;var n=document.createElement("td");a.appendChild(n),n.innerHTML=t.name;var c=document.createElement("td");a.appendChild(c);var r=t.score+" = "+dataCoOccuranceList[t.name].size+" (함께한 사람수)";t.score-dataCoOccuranceList[t.name].size>0&&(r=r+" + "+(t.score-dataCoOccuranceList[t.name].size)+" (가산점)"),c.innerHTML=r;var d=document.createElement("td");a.appendChild(d);var o="";dataCoOccuranceList[t.name].forEach(function(a){o+="<span",1==dataFirstContact[t.name].has(a)&&(o+=" class='colorRed'"),o+=">",o+=a,o+="</span> "}),d.innerHTML=o});var tblSchdules=document.getElementById("tblSchdules");dataSchedules.forEach(function(t){var a=document.createElement("tr");tblSchdules.appendChild(a);var e=document.createElement("td");a.appendChild(e),e.innerHTML=t[DATE];var n=document.createElement("td");a.appendChild(n),1==t[PUBLIC]?n.innerHTML="Y":n.innerHTML="N";var c=document.createElement("td");a.appendChild(c),c.innerHTML=t[PARTICIPANTS][0];var r=document.createElement("td");a.appendChild(r);for(var d="",o=1;o<t[PARTICIPANTS].length;o++)d+=t[PARTICIPANTS][o]+" ";r.innerHTML=d});
