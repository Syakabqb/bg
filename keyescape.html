<!DOCTYPE html>
<html lang="ko">

<head>
    <link href="https://fonts.googleapis.com/css?family=Bangers&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Stylish&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Sriracha&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Nanum+Pen+Script&display=swap" rel="stylesheet">


    <meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
    <!--모바일페이지크기조절메타태그-->
    <title>제목</title>
</head>

<body id="body">
    <div id="main" class="bgdiv">
        예약일 <input id="dateTarget" type="date" onchange="funcGetTime()"> 공휴일<input type="checkbox" id="chkboxHolyday"> <br><br> 테마 <select id="sltTheme" onchange="funcGetTime()" selectedIndex=0><option>네드</option><option>엔젤리오</option></select> &nbsp;&nbsp;
        시간 <select id="sltTime"></select>
        <br><br> 이름 <input id="inputName" value="홍길동" style="width:48px;"> &nbsp;&nbsp; 폰번호 <input id="inputPhone1" style="width:24px;" value="010">-<input value="1234" id="inputPhone2" style="width:32px;">-<input value="1234" id="inputPhone3" style="width:32px;">
        <br><br> 대기시간 (ms) <input id="inputTry" style="width:24px;" value=10> &nbsp; <button onclick="funcFirst()">첫번째</button> &nbsp; <button>두번째</button>
        <br><br><br> <input id="inputFirst">

    </div>
    <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
    <script>
        var dateTarget = document.getElementById("dateTarget")
        dateTarget.valueAsDate = new Date()
        var selectedThemeIdx = 0
        var NERD = 0
        var ANGERLIO = 1
        var BBIRITBBO = 2
        var HOLYDAY = 3

        var SUNDAY = 2
        var SATURDAY = 1
        var WEEKDAY = 0

        var dateFlag = 0
        var sltTime = document.getElementById("sltTime")


        var timeTableCode = new Array()
        timeTableCode[NERD] = new Array(
            new Array(1470, 1471, 1472, 1473, 1474, 1475, 1476, 1477),
            new Array(1486, 1487, 1488, 1489, 1490, 1491, 1492, 1493),
            new Array(1494, 1495, 1496, 1497, 1498, 1499, 1500, 1501))

        timeTableCode[ANGERLIO] = new Array(
            new Array(1523, 1524, 1525, 1526, 1527, 1528, 1529, 1530, 1531, ),
            new Array(1532, 1533, 1534, 1535, 1536, 1537, 1538, 1539, 1540),
            new Array(1541, 1542, 1543, 1544, 1545, 1546, 1547, 1548, 1549))


        var timeTable = new Array()
        timeTable[NERD] = new Array(
            new Array("10:30", "12:00", "13:35", "15:15", "16:50", "18:25", "20:05", "21:45"),
            new Array("10:50", "12:30", "14:05", "15:45", "17:20", "18:55", "20:35", "22:15"),
            new Array("10:50", "12:30", "14:05", "15:45", "17:20", "18:55", "20:35", "22:15"))

        timeTable[ANGERLIO] = new Array(
            new Array("10:00", "11:30", "13:00", "14:30", "16:00", "17:30", "19:00", "20:30", "22:00"),
            new Array("10:30", "12:00", "13:30", "15:00", "16:30", "18:00", "19:30", "21:00", "22:30"),
            new Array("10:30", "12:00", "13:30", "15:00", "16:30", "18:00", "19:30", "21:00", "22:30"))

        function funcFirst() {
            var inputFirst = document.getElementById("inputFirst")
            var inputName = document.getElementById("inputName")
            var inputPhone1 = document.getElementById("inputPhone1")
            var inputPhone2 = document.getElementById("inputPhone2")
            var inputPhone3 = document.getElementById("inputPhone3")
            if (inputName.value == "" || inputPhone1.value == "" || inputPhone2.value == "" || inputPhone3.value == "") {
                alert("입력한 내용을 확인해주세요.")
                return
            }
            var month = dateTarget.valueAsDate.getMonth() + 1
            var day = dateTarget.valueAsDate.getDate()
            console.log(month, day)

            inputFirst.value = "javascript:fun_zizum_select('14','1','');"
            inputFirst.value += "javascript:fun_calendar_move('2020','" + month + "');"
            inputFirst.value += "var tempDay = document.getElementsByTagName('td');"
            inputFirst.value += "var dateLoc = 0; while(dateLoc<50 && tempDay[dateLoc].innerText!=" + day + "){dateLoc++;}"
            inputFirst.value += "var JHCount = 0;"
            inputFirst.value += "function funcRecallJH(){var JHDate=new Date();console.log(JHCount++,JHDate.toGMTString());"
            inputFirst.value += "javascript:fun_calendar_move('2020','" + month + "');"
            inputFirst.value += "if (tempDay[dateLoc].children[0].style.color==''){"
            inputFirst.value += "clearInterval(JHInterval);f = eval('document.register');f.zizum_num.value='14';f.rev_days.value='"
            inputFirst.value += dateTarget.value + "';f.theme_num.value='"
            inputFirst.value += selectedThemeIdx == 0 ? 48 : 51
            inputFirst.value += "';f.theme_time_num.value='"
            inputFirst.value += timeTableCode[selectedThemeIdx][dateFlag][sltTime.selectedIndex]
            inputFirst.value += "';f.submit();}"
            inputFirst.value += "}"
        }
        funcGetTime()
        funcFirst()


        function funcGetTime() {


            while (sltTime.childElementCount > 0) {
                sltTime.removeChild(sltTime.children[0])
            }
            var sltTheme = document.getElementById("sltTheme")
            selectedThemeIdx = sltTheme.selectedIndex
            var targetDate = new Date(dateTarget.value)
            dateFlag = 0
            if (document.getElementById("chkboxHolyday").checked == true || targetDate.getDay() == 0) {
                dateFlag = SUNDAY
            } else if (targetDate.getDay() == 6) {
                dateFlag = SATURDAY
            }

            for (let idx = 0; idx < timeTable[selectedThemeIdx][dateFlag].length; idx++) {
                var option = document.createElement("option")
                option.innerHTML = timeTable[selectedThemeIdx][dateFlag][idx]
                sltTime.appendChild(option)

            }

            console.log(dateFlag)

        }
    </script>

</body>
